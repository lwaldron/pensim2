<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>simulate correlated predictors with time-to-event or binary outcome — create.data • pensim</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="simulate correlated predictors with time-to-event or binary outcome — create.data" />
<meta property="og:description" content="This function creates multiple groups of predictor variables which may
  be correlated within each group, and binary or survival time (without
  censoring) response according to specified weights of the predictors." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">pensim</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.3.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/pensim.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/waldronlab/pensim/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>simulate correlated predictors with time-to-event or binary outcome</h1>
    
    <div class="hidden name"><code>create.data.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function creates multiple groups of predictor variables which may
  be correlated within each group, and binary or survival time (without
  censoring) response according to specified weights of the predictors.</p>
    </div>

    <pre class="usage"><span class='fu'>create.data</span>(<span class='kw'>nvars</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>100</span>, <span class='fl'>100</span>, <span class='fl'>100</span>, <span class='fl'>100</span>, <span class='fl'>600</span>),
            <span class='kw'>cors</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>0.8</span>, <span class='fl'>0</span>, <span class='fl'>0.8</span>, <span class='fl'>0</span>, <span class='fl'>0</span>),
            <span class='kw'>associations</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>0.5</span>, <span class='fl'>0.5</span>, <span class='fl'>0.3</span>, <span class='fl'>0.3</span>, <span class='fl'>0</span>),
            <span class='kw'>firstonly</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>TRUE</span>, <span class='fl'>FALSE</span>, <span class='fl'>TRUE</span>, <span class='fl'>FALSE</span>, <span class='fl'>FALSE</span>),
            <span class='kw'>nsamples</span> <span class='kw'>=</span> <span class='fl'>100</span>,
            <span class='kw'>censoring</span> <span class='kw'>=</span> <span class='st'>"none"</span>,
            <span class='kw'>labelswapprob</span> <span class='kw'>=</span> <span class='fl'>0</span>,
            <span class='kw'>response</span> <span class='kw'>=</span> <span class='st'>"timetoevent"</span>,
            <span class='kw'>basehaz</span> <span class='kw'>=</span> <span class='fl'>0.2</span>,
            <span class='kw'>logisticintercept</span> <span class='kw'>=</span> <span class='fl'>0</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>nvars</th>
      <td><p>integer vector giving the number of variables of each
    variable type.  The number of variable types is equal to the length
    of this vector.</p></td>
    </tr>
    <tr>
      <th>cors</th>
      <td><p>integer vector of the same length as nvars, giving the population pairwise Pearson
    correlation within each group.</p></td>
    </tr>
    <tr>
      <th>associations</th>
      <td><p>integer vector of the same length as nvars, giving the associations of each
    type with outcome</p></td>
    </tr>
    <tr>
      <th>firstonly</th>
      <td><p>logical vector of the same length as nvars, specifying whether only the first variable
    of each type is associated with outcome (TRUE) or all variables of that
    type (FALSE)</p></td>
    </tr>
    <tr>
      <th>nsamples</th>
      <td><p>an integer giving the number of observations</p></td>
    </tr>
    <tr>
      <th>censoring</th>
      <td><p>"none" for no censoring, or a vector of length two c(a,b)
    for uniform U(a,b) censoring.</p></td>
    </tr>
    <tr>
      <th>labelswapprob</th>
      <td><p>This provides an option to add uncertainty to
    binary outcomes by randomly switching labels with probability
    labelswapprob.  The probability of a label being swapped is
    independent for each observation.  The value is ignored if
    response is "timetoevent"</p></td>
    </tr>
    <tr>
      <th>response</th>
      <td><p>either "timetoevent" or "binary"</p></td>
    </tr>
    <tr>
      <th>basehaz</th>
      <td><p>baseline hazard, used for "timetoevent"</p></td>
    </tr>
    <tr>
      <th>logisticintercept</th>
      <td><p>intercept which is added to X%*%Beta for "binary"</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This function simulates "predictor" variables in one or more groups, which are standard
  normally distributed.  The user can specify the population correlation
  within each variable group, the association of each variable group to
  outcome, and whether the first or all variables of that type should be
  associated with outcome.  The simulated response variable can be time to event
  with an exponential distribution, or binary survival with a logistic distribution.</p>
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Returns a list with items:</p>
<dt>summary</dt><dd><p>a summary of the variable
    types produced</p></dd>
  <dt>associations</dt><dd><p>weights of each variable in
    computing the outcome</p></dd>
  <dt>covariance</dt><dd><p>covariance matrix used for
  generating potentially correlated random predictors</p></dd>
  <dt>data</dt><dd><p>dataframe containing the predictors and response.
  Response is the last column for binary outcome ("outcome"), and the
  last two columns for timetoevent outcome ("time" and "cens")</p></dd>

    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Waldron L., Pintilie M., Tsao M.-S., Shepherd F. A., Huttenhower C.*, and Jurisica I.*   Optimized
application of penalized regression methods to diverse genomic
data. (2010). Under review.  (*equal contribution)</p>
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>Depends on the MASS package for correlated random number generation</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>##binary outcome example</span>
<span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span>(<span class='fl'>9</span>)
<span class='no'>x</span> <span class='kw'>&lt;-</span>
  <span class='fu'>create.data</span>(
    <span class='kw'>nvars</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>15</span>, <span class='fl'>5</span>),
    <span class='kw'>cors</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>0</span>, <span class='fl'>0.8</span>),
    <span class='kw'>associations</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>0</span>, <span class='fl'>2</span>),
    <span class='kw'>firstonly</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>TRUE</span>, <span class='fl'>TRUE</span>),
    <span class='kw'>nsamples</span> <span class='kw'>=</span> <span class='fl'>50</span>,
    <span class='kw'>response</span> <span class='kw'>=</span> <span class='st'>"binary"</span>,
    <span class='kw'>logisticintercept</span> <span class='kw'>=</span> <span class='fl'>0.5</span>
  )
<span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span>(<span class='no'>x</span>)</div><div class='output co'>#&gt;              Length Class      Mode   
#&gt; summary        6    data.frame list   
#&gt; associations  20    -none-     numeric
#&gt; covariance   400    -none-     numeric
#&gt; data          21    data.frame list   </div><div class='input'><span class='no'>x</span>$<span class='no'>summary</span></div><div class='output co'>#&gt;   start end cors associations num firstonly
#&gt; a     1  15  0.0            0  15      TRUE
#&gt; b    16  20  0.8            2   5      TRUE</div><div class='input'><span class='no'>model</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/glm.html'>glm</a></span>(<span class='no'>outcome</span> ~ <span class='no'>.</span>,  <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>x</span>$<span class='no'>data</span>, <span class='kw'>family</span> <span class='kw'>=</span> <span class='no'>binomial</span>)</div><div class='output co'>#&gt; <span class='warning'>Warning: glm.fit: algorithm did not converge</span></div><div class='output co'>#&gt; <span class='warning'>Warning: glm.fit: fitted probabilities numerically 0 or 1 occurred</span></div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span>(<span class='no'>model</span>)</div><div class='output co'>#&gt; 
#&gt; Call:
#&gt; glm(formula = outcome ~ ., family = binomial, data = x$data)
#&gt; 
#&gt; Deviance Residuals: 
#&gt;        Min          1Q      Median          3Q         Max  
#&gt; -2.156e-04  -2.100e-08   2.100e-08   4.490e-06   2.110e-04  
#&gt; 
#&gt; Coefficients:
#&gt;               Estimate Std. Error z value Pr(&gt;|z|)
#&gt; (Intercept)    394.817  40723.092   0.010    0.992
#&gt; a.1             -2.017   8340.192   0.000    1.000
#&gt; a.2           1054.116 107650.687   0.010    0.992
#&gt; a.3            432.929  41344.208   0.010    0.992
#&gt; a.4            187.507  21631.886   0.009    0.993
#&gt; a.5           -403.302  39003.798  -0.010    0.992
#&gt; a.6           -236.102  20862.924  -0.011    0.991
#&gt; a.7           -258.201  23085.549  -0.011    0.991
#&gt; a.8              7.364  18988.262   0.000    1.000
#&gt; a.9            229.596  21020.703   0.011    0.991
#&gt; a.10          -519.764  55465.620  -0.009    0.993
#&gt; a.11          -718.759  73461.234  -0.010    0.992
#&gt; a.12            94.096  16745.928   0.006    0.996
#&gt; a.13          -619.513  65350.574  -0.009    0.992
#&gt; a.14           585.887  61785.544   0.009    0.992
#&gt; a.15          -271.199  30368.663  -0.009    0.993
#&gt; b.1            447.844  49587.944   0.009    0.993
#&gt; b.2           -100.723  21001.800  -0.005    0.996
#&gt; b.3           -197.254  35209.129  -0.006    0.996
#&gt; b.4           1540.346 146783.886   0.010    0.992
#&gt; b.5          -1080.818 105901.366  -0.010    0.992
#&gt; 
#&gt; (Dispersion parameter for binomial family taken to be 1)
#&gt; 
#&gt;     Null deviance: 6.6406e+01  on 49  degrees of freedom
#&gt; Residual deviance: 3.7489e-07  on 29  degrees of freedom
#&gt; AIC: 42
#&gt; 
#&gt; Number of Fisher Scoring iterations: 25
#&gt; </div><div class='input'><span class='no'>dat</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/t.html'>t</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>as.matrix</a></span>(<span class='no'>x</span>$<span class='no'>data</span>[, -<span class='fu'><a href='https://rdrr.io/r/base/match.html'>match</a></span>(<span class='st'>"outcome"</span>, <span class='fu'><a href='https://rdrr.io/r/base/colnames.html'>colnames</a></span>(<span class='no'>x</span>$<span class='no'>data</span>))]))
<span class='fu'><a href='https://rdrr.io/r/stats/heatmap.html'>heatmap</a></span>(<span class='no'>dat</span>, <span class='kw'>ColSideColors</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span>(<span class='no'>x</span>$<span class='no'>data</span>$<span class='no'>outcome</span> <span class='kw'>==</span> <span class='fl'>0</span>, <span class='st'>"black"</span>, <span class='st'>"white"</span>))</div><div class='img'><img src='create.data-1.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'>##censored survival outcome example:</span>
<span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span>(<span class='fl'>1</span>)
<span class='no'>x</span> <span class='kw'>&lt;-</span> <span class='fu'>create.data</span>(
  <span class='kw'>nvars</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>15</span>, <span class='fl'>5</span>),
  <span class='kw'>cors</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>0</span>, <span class='fl'>0.8</span>),
  <span class='kw'>associations</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>0</span>, <span class='fl'>2</span>),
  <span class='kw'>firstonly</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>TRUE</span>, <span class='fl'>TRUE</span>),
  <span class='kw'>nsamples</span> <span class='kw'>=</span> <span class='fl'>50</span>,
  <span class='kw'>censoring</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>2</span>, <span class='fl'>10</span>),
  <span class='kw'>response</span> <span class='kw'>=</span> <span class='st'>"timetoevent"</span>
)
<span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span>(<span class='no'>x</span>$<span class='no'>data</span>$<span class='no'>cens</span> <span class='kw'>==</span> <span class='fl'>0</span>) / <span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span>(<span class='no'>x</span>$<span class='no'>data</span>)  <span class='co'>#34 percent censoring</span></div><div class='output co'>#&gt; [1] 0.44</div><div class='input'>
<span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>survival</span>)
<span class='no'>surv.obj</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/survival/man/Surv.html'>Surv</a></span>(<span class='no'>x</span>$<span class='no'>data</span>$<span class='no'>time</span>, <span class='no'>x</span>$<span class='no'>data</span>$<span class='no'>cens</span>)
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.html'>plot</a></span>(<span class='fu'><a href='https://rdrr.io/pkg/survival/man/survfit.html'>survfit</a></span>(<span class='no'>surv.obj</span> ~ <span class='fl'>1</span>), <span class='kw'>ylab</span> <span class='kw'>=</span> <span class='st'>"Survival probability"</span>, <span class='kw'>xlab</span> <span class='kw'>=</span> <span class='st'>"time"</span>)</div><div class='img'><img src='create.data-2.png' alt='' width='700' height='433' /></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Waldron, Levi, Pintilie, Melania, Tsao, {Ming-Sound}, Shepherd, Frances A, Huttenhower, Curtis, Jurisica, Igor.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.0.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


